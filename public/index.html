<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PanaderÃ­a NavideÃ±a La Desesperanza</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link
        href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@700&family=Nunito:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <header>
        <div class="brand">
            <h1>ğŸ„ PanaderÃ­a La Desesperanza ğŸ„</h1>
        </div>

        <div class="user-actions">
            <div id="user-panel">
                <input type="text" id="username" placeholder="ğŸ‘¤ Usuario">
                <input type="password" id="password" placeholder="ğŸ”‘ ContraseÃ±a">
                <button onclick="login()" class="btn-login">Entrar</button>
                <button onclick="abrirRegistro()" class="btn-register">Crear Cuenta</button>
            </div>

            <div id="user-info" style="display:none;">
                <span>Hola, <b id="display-name"></b> | Saldo: $<span id="display-saldo">0</span></span>
                <div class="funds-control">
                    <input type="number" id="monto-fondos" placeholder="$">
                    <button onclick="agregarFondos()" class="btn-add">+</button>
                </div>
                <button onclick="logout()" class="btn-logout">Salir</button>
            </div>
        </div>
    </header>

    <main>
        <section id="map-section">
            <h3>Nuestras Sucursales</h3>
            <div id="mapid"></div>
        </section>

        <div class="container">
            <section id="productos">

                <div id="admin-panel" style="display:none;" class="card-registro">
                    <h3 style="color: var(--rojo-oscuro); margin-top:0;">ğŸ‘¨â€ğŸ³ GestiÃ³n del Horno (Admin)</h3>

                    <button onclick="verHistorial()" class="btn-login"
                        style="background-color: #3498db; width: 100%; margin-bottom: 15px;">
                        ğŸ“œ Ver Historial de Ventas
                    </button>
                    <hr style="border-color: var(--cafe-tierra); margin-bottom: 20px;">

                    <input type="hidden" id="prod-id">
                    <div
                        style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; margin-bottom: 10px;">
                        <input type="text" id="prod-nombre" placeholder="Nombre del Pan">
                        <input type="text" id="prod-desc" placeholder="DescripciÃ³n breve">
                        <input type="number" id="prod-precio" placeholder="Precio ($)" style="width: 100px;">
                        <input type="text" id="prod-img" placeholder="URL de la Imagen">
                    </div>

                    <div>
                        <button onclick="guardarProducto()" class="btn-login">ğŸ’¾ Guardar Pan</button>
                        <button onclick="limpiarFormularioAdmin()" class="btn-logout">ğŸ§¹ Limpiar</button>
                    </div>
                </div>

                <h2>Pan de Temporada</h2>
                <div id="lista-productos" class="grid"></div>
            </section>

            <aside id="carrito">
                <h2>Tu Canasta</h2>
                <ul id="lista-carrito"></ul>
                <p>Total: $<span id="total-carrito">0</span></p>
                <button onclick="procesarCompra()" class="btn-pagar">Pagar y Generar Ticket</button>
            </aside>
        </div>
    </main>

    <div id="modal-registro" class="modal">
        <div class="modal-content card-registro">
            <span class="close-btn" onclick="cerrarRegistro()">&times;</span>
            <h3>ğŸ… Ãšnete a la Familia ğŸ…</h3>
            <p>RegÃ­strate para pedir tu pan calientito</p>

            <input type="text" id="reg-user" placeholder="Usuario deseado">
            <input type="password" id="reg-pass" placeholder="ContraseÃ±a">
            <input type="email" id="reg-email" placeholder="Correo ElectrÃ³nico">
            <input type="text" id="reg-nombre" placeholder="Tu Nombre Real">

            <button onclick="registrarUsuario()" class="btn-pagar">Â¡Registrarme!</button>
        </div>
    </div>

    <div id="modal-ticket" class="modal">
        <div class="modal-content">
            <h3>ğŸ… TICKET DE COMPRA ğŸ…</h3>
            <p>Negocio: PanaderÃ­a La Desesperanza</p>
            <p>Fecha: <span id="ticket-fecha"></span></p>
            <p>Venta #: <span id="ticket-id"></span></p>
            <hr>
            <ul id="ticket-productos"></ul>
            <hr>
            <h4>TOTAL: $<span id="ticket-total"></span></h4>
            <button onclick="cerrarTicket()" class="btn-logout">Cerrar</button>
        </div>
    </div>

    <div id="modal-historial" class="modal">
        <div class="modal-content" style="max-height: 80vh; overflow-y: auto;">
            <h3 style="color: var(--azul-noche);">ğŸ“œ Historial de Ventas</h3>
            <ul id="lista-historial" style="list-style: none; padding: 0; text-align: left;">
            </ul>
            <button onclick="cerrarHistorial()" class="btn-logout" style="margin-top: 20px;">Cerrar Historial</button>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="main.js"></script>
</body>

</html>